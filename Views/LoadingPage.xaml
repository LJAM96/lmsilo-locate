<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="GeoLens.Views.LoadingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <!-- Gradient Background -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1a1a1a" Offset="0"/>
                <GradientStop Color="#0d1117" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <!-- Central Loading Content -->
        <StackPanel
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Spacing="24"
            MaxWidth="400">

            <!-- App Icon/Logo -->
            <Viewbox Width="120" Height="120">
                <FontIcon
                    Glyph="&#xE909;"
                    Foreground="{ThemeResource AccentFillColorDefaultBrush}"
                    FontSize="120"/>
            </Viewbox>

            <!-- App Title -->
            <TextBlock
                Text="GeoLens"
                FontSize="36"
                FontWeight="SemiBold"
                HorizontalAlignment="Center"
                Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>

            <!-- Status Message -->
            <TextBlock
                x:Name="StatusText"
                Text="Initializing..."
                FontSize="14"
                HorizontalAlignment="Center"
                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                TextWrapping="Wrap"
                TextAlignment="Center"/>

            <!-- Progress Ring -->
            <ProgressRing
                x:Name="LoadingRing"
                IsActive="True"
                Width="48"
                Height="48"
                HorizontalAlignment="Center"/>

            <!-- Detailed Progress Bar (Optional) -->
            <ProgressBar
                x:Name="DetailedProgress"
                Visibility="Collapsed"
                Width="300"
                Height="4"
                IsIndeterminate="False"
                Value="0"
                Maximum="100"/>

            <!-- Sub-status text -->
            <TextBlock
                x:Name="SubStatusText"
                Text=""
                FontSize="12"
                HorizontalAlignment="Center"
                Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                Opacity="0.7"
                TextWrapping="Wrap"
                TextAlignment="Center"
                Visibility="Collapsed"/>

            <!-- Error Panel (Hidden by default) -->
            <Border
                x:Name="ErrorPanel"
                Visibility="Collapsed"
                Background="{ThemeResource SystemFillColorCriticalBackgroundBrush}"
                BorderBrush="{ThemeResource SystemFillColorCriticalBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="16"
                MaxWidth="380">
                <StackPanel Spacing="12">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon
                            Glyph="&#xE783;"
                            FontSize="16"
                            Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                        <TextBlock
                            Text="Initialization Failed"
                            FontWeight="SemiBold"
                            Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                    </StackPanel>

                    <TextBlock
                        x:Name="ErrorText"
                        TextWrapping="Wrap"
                        FontSize="12"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>

                    <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right">
                        <Button
                            x:Name="RetryButton"
                            Content="Retry"
                            Click="RetryButton_Click"
                            Style="{ThemeResource AccentButtonStyle}"/>
                        <Button
                            x:Name="ExitButton"
                            Content="Exit"
                            Click="ExitButton_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Tips Section -->
            <Border
                x:Name="TipsPanel"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="16"
                MaxWidth="380"
                Visibility="Collapsed">
                <StackPanel Spacing="8">
                    <TextBlock
                        Text="ðŸ’¡ Did you know?"
                        FontWeight="SemiBold"
                        FontSize="12"
                        Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                    <TextBlock
                        x:Name="TipText"
                        Text="GeoLens can predict locations from images with no GPS data using AI!"
                        TextWrapping="Wrap"
                        FontSize="12"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </Border>

        </StackPanel>

        <!-- Version info in corner -->
        <TextBlock
            x:Name="VersionText"
            Text="v2.4"
            FontSize="11"
            Opacity="0.4"
            Margin="16"
            HorizontalAlignment="Left"
            VerticalAlignment="Bottom"
            Foreground="{ThemeResource TextFillColorTertiaryBrush}"/>

    </Grid>
</Page>
